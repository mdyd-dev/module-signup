---
name: recover_password
resource: Customization
resource_owner: anyone
flash_notice: 'We have sent a password reset email to this address.'
redirect_to: /recover-password/sent
configuration:
  properties:
    email:
      validation:
        presence:
          message: Please enter your email
        email:
          message: Provided email is invalid
callback_actions: >
  {% query_graph 'generate_user_temporary_token', email: form.properties.email, result: g %}
  {% assign user = g.people.results.first %}
  {% if user %}
    {% execute_query 'update_password_token', id: user.id, token: user.temporary_token %}
  {% endif %}
---
{% include 'modules/utils/public/views/partials/utils' %}
{% include form_errors %}

{% form html-novalidate: '', html-class: 'with-action-bar' %}
    {%
      include input with f.properties.email
      label: 'Email',
      type: 'email'
    %}


  {%- include submit_tag with 'Send Verification Email' -%}
{% endform %}
